<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A Gift for You</title>
    <style>
        /* 1. Reset & Background */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body, html { 
            height: 100%; width: 100%; overflow: hidden; 
            background: radial-gradient(circle at center, #1b2735 0%, #05070a 100%);
            display: flex; justify-content: center; align-items: center;
            font-family: 'Georgia', serif;
            perspective: 1000px; /* Essential for 3D */
        }

        /* 2. 3D Gift Box Styling */
        .box-container {
            position: relative;
            width: 150px;
            height: 150px;
            cursor: pointer;
            z-index: 200;
            transition: all 0.8s ease;
        }

        .box-body {
            position: absolute;
            width: 100%; height: 100%;
            background: #e63946;
            border-radius: 8px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.3);
        }

        /* Ribbon */
        .box-body::after, .box-body::before {
            content: ''; position: absolute; background: #ffb7c5;
        }
        .box-body::after { width: 20px; height: 100%; left: 50%; transform: translateX(-50%); }
        .box-body::before { width: 100%; height: 20px; top: 50%; transform: translateY(-50%); }

        .box-lid {
            position: absolute;
            width: 110%; height: 40px;
            background: #d62839;
            top: -20px; left: -5%;
            border-radius: 5px;
            z-index: 210;
            transition: all 0.7s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        /* 3. Opening Animation Classes */
        .box-container.open .box-lid {
            transform: translateY(-150px) rotateX(45deg);
            opacity: 0;
        }
        .box-container.open {
            transform: scale(0);
            opacity: 0;
            pointer-events: none;
        }

        /* 4. Rose & Stars (Hidden until open) */
        #final-rose { 
            position: absolute; top: 50%; left: 50%; 
            transform: translate(-50%, -50%) scale(0);
            font-size: 150px; opacity: 0; 
            transition: all 4s cubic-bezier(0.34, 1.56, 0.64, 1);
            filter: drop-shadow(0 0 30px rgba(230, 57, 70, 0.4));
            z-index: 100;
        }

        .petal { position: fixed; pointer-events: none; z-index: 50; }

        #reveal-text { 
            position: absolute; bottom: 15%; width: 100%; text-align: center;
            opacity: 0; transition: opacity 3s ease 2s;
            color: #d1d9e6;
        }

        .star {
            position: absolute; background: white; border-radius: 50%;
            opacity: 0; animation: twinkle 3s infinite;
        }
        @keyframes twinkle { 0%, 100% { opacity: 0.2; } 50% { opacity: 0.8; } }

    </style>
</head>
<body>

    <div class="box-container" id="giftBox" onclick="openBox()">
        <div class="box-lid"></div>
        <div class="box-body"></div>
        <p style="color: white; position: absolute; bottom: -40px; width: 100%; text-align: center; font-size: 14px; letter-spacing: 1px;">TAP TO OPEN</p>
    </div>

    <div id="final-rose">ðŸŒ¹</div>

    <div id="reveal-text">
        <p style="font-size: 20px; font-style: italic; margin-bottom: 10px;">"In every silence, Iâ€™m thinking of you."</p>
        <p style="font-size: 12px; color: #e63946; letter-spacing: 4px;">HAPPY ROSE DAY</p>
    </div>

    <script>
        function openBox() {
            // Haptic Feedback
            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);

            // Trigger Box Animation
            document.getElementById('giftBox').classList.add('open');

            // 1. Create Stars
            for (let i = 0; i < 60; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 2 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + 'vw';
                star.style.top = Math.random() * 100 + 'vh';
                document.body.appendChild(star);
                setTimeout(() => star.style.opacity = '0.6', 1000);
            }

            // 2. Petal Storm
            const colors = ['#8b0000', '#e63946', '#ffd1dc', '#c0c0c0'];
            for (let i = 0; i < 60; i++) {
                setTimeout(() => {
                    const p = document.createElement('div');
                    p.innerHTML = 'ðŸŒ¸'; p.className = 'petal';
                    p.style.color = colors[i % 4];
                    p.style.left = Math.random() * 100 + 'vw';
                    p.style.fontSize = (Math.random() * 15 + 15) + 'px';
                    document.body.appendChild(p);
                    p.animate([
                        { top: '-10%', transform: 'rotate(0deg)' },
                        { top: '50%', left: '50%', transform: 'scale(0) rotate(720deg)' }
                    ], { duration: 4000, easing: 'ease-in-out', fill: 'forwards' });
                }, i * 80);
            }

            // 3. Final Reveal
            setTimeout(() => {
                const fr = document.getElementById('final-rose');
                fr.style.opacity = '1';
                fr.style.transform = 'translate(-50%, -50%) scale(1)';
                document.getElementById('reveal-text').style.opacity = '1';
            }, 3500);
        }
    </script>
</body>
</html>
